  <div class="page-container">
    <app-user-bar></app-user-bar>

    <div id="myModal" class="modal">
      <span class="close" (click)="closeModal()">&times;</span>

      <img class="modal-content" id="img01" />

      <div id="caption"></div>
    </div>


    <div class="sub-galleries-container" fxLayout="row">
      <div class="drop-list-container" cdkDropListGroup>
        <form #editForm="ngForm" (ngSubmit)="editImages(editForm)" id="edit-form">
        <div class="sub-gallery-container" *ngFor="let subgallery of subGalleries" fxFlex="300px" fxLayout="column" >
          <!-- subgallery's header-->
          <div class="sub-gallery-top-container" fxFlex="nogrow" fxLayout="row" fxLayoutAlign="center center">
            <span fxFlex="90">{{ subgallery.fi }}</span>
            <span class="delete-container" (click)="onDeleteSubGallery(subgallery)" fxFlex><i class="fa fa-trash"></i></span>
          </div>
          <!-- subgallery's images-->
          <div
            cdkDropList
            class="example-list"
            (cdkDropListDropped)="drop($event, subgallery)"
            fxLayout="column"
            fxLayoutAlign="none center"
            [id]="subgallery._id"
          >
              <mat-card
                *ngFor="let img of subgallery.images; let i = index"
                class="image-card"
                cdkDrag
              >
                <mat-card-content>
                  <div
                    fxLayout="column"
                    fxLayoutAlign="none center"
                    class="top-container"
                  >
                    <div fxFlex="nogrow" fxLayout="row" class="max-width">
                      <span class="delete-container" (click)="deleteImage(img.Key)"
                        ><i class="fa fa-trash"></i
                      ></span>
                      <span fxFlex></span>
                      <span class="drag-container" cdkDragHandle>
                        <i class="fa fa-arrows-alt"></i>
                      </span>
                    </div>
                    <img
                      fxFlex="nogrow"
                      src="{{ img.url }}"
                      alt="{{ img.alt_fi }}"
                      id="myImg"
                      class="image"
                      (click)="openImage($event)"
                    />

                    <label class="title-label">Suomenkielinen kuvateksti:</label>
                    <input
                      name="{{ img.Key + ':alt_fin' }}"
                      type="text"
                      fxFlex="nogrow"
                      class="card-input"
                      [ngModel]="img.alt_fi"
                    />

                    <label class="title-label">Englanninkielinen kuvateksti:</label>
                    <input
                      name="{{ img.Key + ':alt_en' }}"
                      type="text"
                      value="{{ img.alt_en }}"
                      fxFlex="nogrow"
                      class="card-input"
                      [ngModel]="img.alt_en"
                    />
                  </div>
                </mat-card-content>
              </mat-card>
            </div>
            <span fxFlex="nogrow" fxLayout="row" fxLayoutAlign="center">
              <button (click)="onAddImage(subgallery)" type="button" fxFlex="nogrow">+</button>
            </span>
          </div>
        </form>
      </div>
      <!-- new subgallery -->
      <div class="new-sub-gallery-main-container" fxFlex="300px" fxLayout="column" fxLayoutAlign="start center">
        <div class="new-sub-gallery-container" fxLayout="row" fxLayoutAlign="center center">
         <form #f="ngForm" fxFlex="nogrow">
            <input type="text" name="gallery" placeholder="Uuden gallerian nimi" ngModel>
         </form>
         <button (click)="onAddGallery(f)" fxFlex="nogrow">+</button>
        </div>
      
      </div>

    </div>


    <button mat-button class="ok-button save" form="edit-form">
      Tallenna muutokset
    </button>
  </div>